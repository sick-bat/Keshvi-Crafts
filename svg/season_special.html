<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Customer Testimonials Carousel</title>
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 40px 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    h2 {
      margin-bottom: 24px;
      font-weight: 700;
      font-size: 2rem;
      color: #333;
    }
    
    /* Carousel container */
    .carousel-container {
      max-width: 900px;
      width: 100%;
      position: relative;
    }
    
    /* Carousel viewport */
    .carousel-viewport {
      overflow: hidden;
      width: 100%;
    }
    
    /* Carousel track */
    .carousel-track {
      display: flex;
      transition: transform 0.4s ease-in-out;
    }
    
    /* Card styles (Option 1) */
    .card {
      background-color: #f3f4f6;
      border-radius: 10px;
      box-shadow: 0 20px 30px -20px rgba(5, 5, 5, 0.24);
      padding: 2rem;
      max-width: 280px;
      flex: 0 0 280px;
      margin-right: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .header {
      display: flex;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .header .image {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: royalblue;
      flex-shrink: 0;
      background-image: url('https://i.pravatar.cc/60?img='); /* will add index later */
      background-size: cover;
      background-position: center;
    }
    
    .stars {
      display: flex;
      gap: 2px;
      color: #22c55e; /* green */
      font-size: 1rem;
      flex-wrap: nowrap;
    }
    
    .stars svg {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }
    
    .name {
      font-size: 1.125rem;
      font-weight: 600;
      color: #374151;
      margin-top: 0.25rem;
    }
    
    .message {
      font-size: 0.95rem;
      color: #6b7280;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 4;
      -webkit-box-orient: vertical;
      line-height: 1.4;
    }
    
    /* Navigation buttons */
    .nav-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      border: none;
      border-radius: 50%;
      background: rgba(34, 197, 94, 0.8);
      color: white;
      font-weight: bold;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(34, 197, 94, 0.6);
      transition: background 0.2s ease;
      user-select: none;
      z-index: 10;
    }
    
    .nav-button:hover {
      background: rgba(34, 197, 94, 1);
    }
    
    .nav-prev {
      left: -50px;
    }
    
    .nav-next {
      right: -50px;
    }
    
    /* Responsive */
    @media (max-width: 700px) {
      .card {
        max-width: 220px;
        flex: 0 0 220px;
        margin-right: 16px;
      }
      .nav-prev {
        left: -40px;
      }
      .nav-next {
        right: -40px;
      }
    }
    
    @media (max-width: 400px) {
      .card {
        max-width: 180px;
        flex: 0 0 180px;
        margin-right: 12px;
      }
      .nav-prev,
      .nav-next {
        width: 32px;
        height: 32px;
        font-size: 1.2rem;
      }
      .nav-prev {
        left: -35px;
      }
      .nav-next {
        right: -35px;
      }
    }
  </style>
</head>
<body>
  <h2>What Customers Say About Us</h2>
  <div class="carousel-container" aria-label="Customer testimonials carousel">
    <button class="nav-button nav-prev" aria-label="Previous testimonials">‹</button>
    <div class="carousel-viewport">
      <div class="carousel-track" id="carouselTrack">
        <!-- Cards will be injected here by JS -->
      </div>
    </div>
    <button class="nav-button nav-next" aria-label="Next testimonials">›</button>
  </div>

  <script>
    // Sample testimonial data
    const testimonials = [
      {
        name: "John Doe",
        rating: 5,
        message:
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Deserunt voluptatem alias ut provident sapiente repellendus.",
        imageIndex: 1,
      },
      {
        name: "Jane Smith",
        rating: 4,
        message:
          "Really loved the quality and customer service. Highly recommend to everyone looking for handcrafted items.",
        imageIndex: 8,
      },
      {
        name: "Ahmed Khan",
        rating: 5,
        message:
          "Superb experience! The products exceeded my expectations and arrived on time.",
        imageIndex: 15,
      },
      {
        name: "Maria Garcia",
        rating: 4,
        message:
          "Beautiful handmade pieces! Absolutely worth every penny.",
        imageIndex: 23,
      },
      {
        name: "Liam Wong",
        rating: 5,
        message:
          "Great customer support and fast shipping. Will order again.",
        imageIndex: 29,
      }
    ];

    // Helpers for stars
    const starSVG = `<svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
    </svg>`;

    // Generate testimonial cards
    function createCard(testimonial) {
      const card = document.createElement('div');
      card.className = 'card';

      const header = document.createElement('div');
      header.className = 'header';

      const image = document.createElement('div');
      image.className = 'image';
      image.style.backgroundImage = `url('https://i.pravatar.cc/60?img=${testimonial.imageIndex}')`;  // random avatar image

      const starContainer = document.createElement('div');
      starContainer.className = 'stars';
      for(let i=0; i<testimonial.rating; i++) {
        starContainer.innerHTML += starSVG;
      }

      const name = document.createElement('p');
      name.className = 'name';
      name.textContent = testimonial.name;

      const textWrapper = document.createElement('div');
      textWrapper.appendChild(starContainer);
      textWrapper.appendChild(name);

      header.appendChild(image);
      header.appendChild(textWrapper);

      const message = document.createElement('p');
      message.className = 'message';
      message.textContent = testimonial.message;

      card.appendChild(header);
      card.appendChild(message);

      return card;
    }

    // Add cards to carousel track
    const track = document.getElementById('carouselTrack');
    testimonials.forEach(testimonial => {
      const card = createCard(testimonial);
      track.appendChild(card);
    });

    // Carousel functionality
    const prevBtn = document.querySelector('.nav-prev');
    const nextBtn = document.querySelector('.nav-next');

    // Current slide index (starting at 0)
    let currentPosition = 0;

    // Number of cards visible at once depends on viewport size
    function cardsVisible() {
      const width = window.innerWidth;
      if(width < 480) return 1;
      else if(width < 700) return 2;
      else return 3;
    }

    function updateCarousel() {
      const visible = cardsVisible();
      const cardWidth = track.querySelector('.card').offsetWidth + 20; // card width + margin-right
      const maxPosition = testimonials.length - visible;
      if(currentPosition < 0) currentPosition = maxPosition;
      if(currentPosition > maxPosition) currentPosition = 0;

      const translateX = -(currentPosition * cardWidth);
      track.style.transform = `translateX(${translateX}px)`;
    }

    prevBtn.addEventListener('click', () => {
      currentPosition--;
      updateCarousel();
    });

    nextBtn.addEventListener('click', () => {
      currentPosition++;
      updateCarousel();
    });

    // Update carousel on resize to adjust visible cards count
    window.addEventListener('resize', updateCarousel);

    // Initialize display
    updateCarousel();
  </script>
</body>
</html>
